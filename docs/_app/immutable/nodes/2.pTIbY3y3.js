import{a as $,t as D,b as fe,c as ue}from"../chunks/disclose-version.CVcIJjNq.js";import{i as ae}from"../chunks/legacy.CIw-Z0eA.js";import{m as _e,v as E,C as re,M as he,ar as te,N as ge,O as U,B as X,P as V,w as L,at as R,Q as se,n as le,R as me,z as W,au as pe,av as ye,aq as ke,aw as Ee,q as Ae,an as be,ag as Te,a7 as xe,G as Z,ax as Ie,ay as $e,az as Ne,ak as Se,aA as we,aB as De,L as Me,aC as ze,aD as Ce,e as Le,a9 as Oe,t as z,c as T,r as x,h as N,a2 as Re,p as ne,aE as oe,aF as Be,aG as Pe,f as J,aH as He,s as I,a as ie,j as qe,I as B}from"../chunks/runtime.CWWsLhhj.js";import{p as M,c as Ve,i as Ge,o as Ye}from"../chunks/index-client.DogemG96.js";import"../chunks/entry.Brp2zIXL.js";import{d as Je,l as Fe,e as Ke,f as F,a as K}from"../chunks/store.BIHyDfal.js";function Qe(e,a){return a}function Ue(e,a,r,t){for(var l=[],s=a.length,o=0;o<s;o++)ye(a[o].e,l,!0);var v=s>0&&l.length===0&&r!==null;if(v){var c=r.parentNode;ke(c),c.append(r),t.clear(),S(e,a[0].prev,a[s-1].next)}Ee(l,()=>{for(var g=0;g<s;g++){var p=a[g];v||(t.delete(p.k),S(e,p.prev,p.next)),Ae(p.e,!v)}})}function Xe(e,a,r,t,l,s=null){var o=e,v={flags:a,items:new Map,first:null};E&&re();var c=null,g=!1;_e(()=>{var p=r(),i=he(p)?p:p==null?[]:te(p),_=i.length;if(g&&_===0)return;g=_===0;let d=!1;if(E){var n=o.data===ge;n!==(_===0)&&(o=U(),X(o),V(!1),d=!0)}if(E){for(var m=null,h,y=0;y<_;y++){if(L.nodeType===8&&L.data===be){o=L,d=!0,V(!1);break}var u=i[y],k=t(u,y);h=de(L,v,m,null,u,k,y,l,a),v.items.set(k,h),m=h}_>0&&X(U())}if(!E){var f=Te;We(i,v,o,l,a,(f.f&R)!==0,t)}s!==null&&(_===0?c?se(c):c=le(()=>s(o)):c!==null&&me(c,()=>{c=null})),d&&V(!0),r()}),E&&(o=L)}function We(e,a,r,t,l,s,o,v){var c=e.length,g=a.items,p=a.first,i=p,_,d=null,n=[],m=[],h,y,u,k;for(k=0;k<c;k+=1){if(h=e[k],y=o(h,k),u=g.get(y),u===void 0){var f=i?i.e.nodes_start:r;d=de(f,a,d,d===null?a.first:d.next,h,y,k,t,l),g.set(y,d),n=[],m=[],i=d.next;continue}if(Ze(u,h,k),u.e.f&R&&se(u.e),u!==i){if(_!==void 0&&_.has(u)){if(n.length<m.length){var A=m[0],b;d=A.prev;var C=n[0],H=n[n.length-1];for(b=0;b<n.length;b+=1)j(n[b],A,r);for(b=0;b<m.length;b+=1)_.delete(m[b]);S(a,C.prev,H.next),S(a,d,C),S(a,H,A),i=A,d=H,k-=1,n=[],m=[]}else _.delete(u),j(u,i,r),S(a,u.prev,u.next),S(a,u,d===null?a.first:d.next),S(a,d,u),d=u;continue}for(n=[],m=[];i!==null&&i.k!==y;)(s||!(i.e.f&R))&&(_??(_=new Set)).add(i),m.push(i),i=i.next;if(i===null)continue;u=i}n.push(u),d=u,i=u.next}if(i!==null||_!==void 0){for(var q=_===void 0?[]:te(_);i!==null;)(s||!(i.e.f&R))&&q.push(i),i=i.next;var ve=q.length;if(ve>0){var ce=null;Ue(a,q,ce,g)}}W.first=a.first&&a.first.e,W.last=d&&d.e}function Ze(e,a,r,t){pe(e.v,a),e.i=r}function de(e,a,r,t,l,s,o,v,c,g){var p=(c&$e)!==0,i=(c&Ne)===0,_=p?i?xe(l):Z(l):l,d=c&Ie?Z(o):o,n={i:d,v:_,k:s,a:null,e:null,prev:r,next:t};try{return n.e=le(()=>v(e,_,d),E),n.e.prev=r&&r.e,n.e.next=t&&t.e,r===null?a.first=n:(r.next=n,r.e.next=n.e),t!==null&&(t.prev=n,t.e.prev=n.e),n}finally{}}function j(e,a,r){for(var t=e.next?e.next.e.nodes_start:r,l=a?a.e.nodes_start:r,s=e.e.nodes_start;s!==t;){var o=Se(s);l.before(s),s=o}}function S(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function je(e,a,r,t,l){var v;E&&re();var s=(v=a.$$slots)==null?void 0:v[r],o=!1;s===!0&&(s=a.children,o=!0),s===void 0||s(e,o?()=>t:t)}function ea(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;P(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var l=e.checked;P(e,"checked",null),e.checked=l}}};e.__on_r=r,we(r),Je()}}function P(e,a,r,t){var l=e.__attributes??(e.__attributes={});E&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[De]=r),r==null?e.removeAttribute(a):typeof r!="string"&&aa(e).includes(a)?e[a]=r:e.setAttribute(a,r))}var ee=new Map;function aa(e){var a=ee.get(e.nodeName);if(a)return a;ee.set(e.nodeName,a=[]);for(var r,t=e,l=Element.prototype;l!==t;){r=ze(t);for(var s in r)r[s].set&&a.push(s);t=Me(t)}return a}function Q(e,a){var r=e.__className,t=ra(a);E&&e.className===t?e.__className=t:(r!==t||E&&e.className!==t)&&(a==null?e.removeAttribute("class"):e.className=t,e.__className=t)}function ra(e){return e??""}function ta(e,a,r=a){var t=Ce();Fe(e,"input",l=>{var s=l?e.defaultValue:e.value;if(s=G(e)?Y(s):s,r(s),t&&s!==(s=a())){var o=e.selectionStart,v=e.selectionEnd;e.value=s??"",v!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(v,e.value.length))}}),(E&&e.defaultValue!==e.value||Le(a)==null&&e.value)&&r(G(e)?Y(e.value):e.value),Oe(()=>{var l=a();G(e)&&l===Y(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function G(e){var a=e.type;return a==="number"||a==="range"}function Y(e){return e===""?null:+e}var sa=D('<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined">'),la=D('<span class="material-icons-outlined icon svelte-2unkt"> </span>');function w(e,a){let r=M(a,"name",8),t=M(a,"handler",8,()=>{}),l=M(a,"color",8,"green");var s=la();Ke(v=>{var c=sa();$(v,c)});var o=T(s,!0);x(s),z(()=>{P(s,"style",`--color:${l()??""};`),K(o,r())}),F("click",s,function(...v){var c;(c=t())==null||c.apply(this,v)}),$(e,s)}var na=D("<div><!></div>");function O(e,a){let r=M(a,"last",8,!1);var t=na(),l=T(t);je(l,a,"default",{}),x(t),z(()=>Q(t,`cell ${(r()?"cell-last":"")??""} svelte-16877gm`)),$(e,t)}var oa=D("<span> </span>");function ia(e,a){let r=M(a,"prio",12,3),t=M(a,"disabled",8,!1);const l=g=>({1:"ALTA",2:"MEDIA",3:"BASSA"})[g],s=()=>{r((r()+1)%3+1)};var o=oa();const v=Re(()=>`${(t()?"DISABILITATO":l(r()))??""} svelte-noefza`);var c=T(o,!0);z(()=>K(c,l(r()))),x(o),z(()=>Q(o,N(v))),F("click",o,s),$(e,o)}var da=D('<input type="text" placeholder="inserisci il nuovo ToDo">'),va=D("<!> <!> <!> <!> <!>",1);function ca(e,a){ne(a,!1);let r=M(a,"todo",12),t=oe(r().priority);const l=Ve(),s=()=>{r(r().done=!r().done,!0)},o=()=>{document.getElementById(r().id).blur()},v=n=>{l("change",{type:n,id:r().id})};Be(()=>(qe(r()),N(t)),()=>{r().priority!=N(t)&&(B(t,r().priority),v("update"))}),Pe(),ae();var c=va(),g=J(c);O(g,{children:(n,m)=>{He();var h=fe();z(()=>K(h,r().id)),$(n,h)},$$slots:{default:!0}});var p=I(g,2);O(p,{children:(n,m)=>{var h=ue(),y=J(h);{var u=f=>{w(f,{name:"circle",handler:s,color:"red"})},k=f=>{w(f,{name:"task_alt",handler:s})};Ge(y,f=>{r().done==!1?f(u):f(k,!1)})}$(n,h)},$$slots:{default:!0}});var i=I(p,2);O(i,{children:(n,m)=>{var h=da();ea(h),z(()=>{Q(h,`todo-item-input-text ${(r().done==!0?"text-done":"")??""} svelte-1jwebdw`),P(h,"id",r().id)}),ta(h,()=>r().task,y=>r(r().task=y,!0)),F("change",h,o),$(n,h)},$$slots:{default:!0}});var _=I(i,2);O(_,{children:(n,m)=>{ia(n,{get"blind:prio"(){return r().priority},get disabled(){return r().done}})},$$slots:{default:!0}});var d=I(_,2);O(d,{last:!0,children:(n,m)=>{w(n,{name:"delete_forever",color:"red",handler:()=>v("delete")})},$$slots:{default:!0}}),$(e,c),ie()}var fa=D('<h1 class="app-title svelte-19rdzgc">ToDos</h1> <div class="todo-list svelte-19rdzgc"><div class="header svelte-19rdzgc"><!></div> <div class="header svelte-19rdzgc"><!></div> <div class="header svelte-19rdzgc"><!></div> <div class="header svelte-19rdzgc"><!></div> <div class="header header-last svelte-19rdzgc"><!></div> <!></div>',1);function ua(e,a){ne(a,!1);let r=oe([]),t=0;const l=async()=>{let f={id:++t,task:"",done:!1,priority:1};console.log("CREATE: ",f),localStorage.setItem("todo"+f.id,JSON.stringify(f)),B(r,[...N(r),f])},s=async f=>{switch(f.detail_type){case"update":update_item(f.detail.id);break;case"delete":o(f.detail.id);break}},o=f=>{console.log("DELETE:",f),B(r,N(r).filter(A=>A.id!=f))};Ye(async()=>{for(let f=0;f<localStorage.length;f++){const A=localStorage.key(f),b=+A.substring(4);b>=t&&(t=b);const C=JSON.parse(localStorage.getItem(A));C!=null&&N(r).push(C)}B(r,[...N(r)])}),ae();var v=fa(),c=I(J(v),2),g=T(c),p=T(g);w(p,{name:"tag"}),x(g);var i=I(g,2),_=T(i);w(_,{name:"task_alt"}),x(i);var d=I(i,2),n=T(d);w(n,{name:"list"}),x(d);var m=I(d,2),h=T(m);w(h,{name:"schedule"}),x(m);var y=I(m,2),u=T(y);w(u,{name:"add_box",handler:l}),x(y);var k=I(y,2);Xe(k,1,()=>N(r),Qe,(f,A)=>{ca(f,{get todo(){return N(A)},$$events:{change:s}})}),x(c),$(e,v),ie()}var _a=D('<main class="svelte-1969b87"><!></main>');function Ea(e){var a=_a(),r=T(a);ua(r,{}),x(a),$(e,a)}export{Ea as component};
